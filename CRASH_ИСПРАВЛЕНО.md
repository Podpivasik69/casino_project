# üöÄ Crash - –û—à–∏–±–∫–∞ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

## ‚úÖ –ß—Ç–æ –ë—ã–ª–æ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞**: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏"

**–ü—Ä–∏—á–∏–Ω–∞**: –í —à–∞–±–ª–æ–Ω–µ `crash.html` –±—ã–ª–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é `showNotification()`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –∏–∑ `showMessage()`.

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è `showMessage()` –∏–∑ crash.html
- –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `updateBalance()` –∏ `getCookie()` 
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ base.html

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¢–µ—Å—Ç–æ–≤

### Backend Tests ‚úÖ
```
‚úì Crash point generation
‚úì Round creation
‚úì Multiplier calculation
‚úì Bet placement
‚úì Manual cashout
‚úì Round crash
‚úì Balance updates
```

### API Tests ‚úÖ
```
‚úì GET /api/games/crash/current/ - 200 OK
‚úì POST /api/games/crash/bet/ - 200 OK
‚úì POST /api/games/crash/cashout/ - 200 OK
‚úì GET /api/games/crash/history/ - 200 OK
```

### Template ‚úÖ
```
‚úì Template loads without errors
‚úì All JavaScript functions defined
‚úì No duplicate functions
```

---

## üéÆ –ö–∞–∫ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–µ—Å—Ç–æ–≤–æ–≥–æ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–£–∂–µ —Å–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –±–∞–ª–∞–Ω—Å–æ–º:

```
Username: crash_api_test
Password: test123
Balance: 1000 ‚ÇΩ
```

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä: http://localhost:8000/crash/
2. –í–æ–π–¥–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –î–æ–∂–¥–∏—Å—å –Ω–∞—á–∞–ª–∞ —Ä–∞—É–Ω–¥–∞ (–∏–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é)
4. –í–≤–µ–¥–∏ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 ‚ÇΩ)
5. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É—Å—Ç–∞–Ω–æ–≤–∏ –∞–≤—Ç–æ-–∫—ç—à–∞—É—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.00x)
6. –ù–∞–∂–º–∏ "–ü–æ—Å—Ç–∞–≤–∏—Ç—å"
7. –î–æ–∂–¥–∏—Å—å —Ä–æ—Å—Ç–∞ –º–Ω–æ–∂–∏—Ç–µ–ª—è
8. –ù–∞–∂–º–∏ "–ó–∞–±—Ä–∞—Ç—å" –∏–ª–∏ –¥–æ–∂–¥–∏—Å—å –∞–≤—Ç–æ-–∫—ç—à–∞—É—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –ù–æ–≤–æ–≥–æ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –û—Ç–∫—Ä–æ–π: http://localhost:8000/register/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è
3. –ü–æ–ø–æ–ª–Ω–∏ –¥–µ–º–æ-–±–∞–ª–∞–Ω—Å (–∫–Ω–æ–ø–∫–∞ "+" –≤ —à–∞–ø–∫–µ)
4. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞: http://localhost:8000/crash/
5. –ò–≥—Ä–∞–π!

---

## üîß –†—É—á–Ω–æ–µ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–∞—É–Ω–¥–∞–º–∏

–ï—Å–ª–∏ —Ä–∞—É–Ω–¥ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–µ—à—å —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é:

### –ß–µ—Ä–µ–∑ Django Shell:
```bash
.venv\Scripts\activate
python manage.py shell
```

```python
from games.services.crash_service import CrashGameService
from games.models import CrashRound

# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥
round = CrashGameService.get_current_round()
print(f"Status: {round.status}")

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—É–Ω–¥ (–µ—Å–ª–∏ WAITING)
if round.is_waiting():
    CrashGameService.activate_round(round)
    print("Round activated!")

# –ö—Ä–∞—à–Ω—É—Ç—å —Ä–∞—É–Ω–¥ (–µ—Å–ª–∏ ACTIVE)
if round.is_active():
    CrashGameService.crash_round(round)
    print("Round crashed!")

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥
new_round = CrashGameService.start_new_round()
print(f"New round: {new_round.round_id}")
```

### –ò–ª–∏ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ú–µ–Ω–µ–¥–∂–µ—Ä:
```bash
.venv\Scripts\activate
python manage.py run_crash_rounds
```

–≠—Ç–æ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—É–Ω–¥—ã —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞–≤—Ç–æ-–∫—ç—à–∞—É—Ç—ã
- –ö—Ä–∞—à–∏—Ç—å —Ä–∞—É–Ω–¥—ã –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç
- –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ä–∞—É–Ω–¥—ã

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –û—à–∏–±–∫–∞ "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏"

**–ü—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
1. –ï—Å—Ç—å –ª–∏ JavaScript –æ—à–∏–±–∫–∏?
2. –ö–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å —É –∑–∞–ø—Ä–æ—Å–∞ –∫ `/api/games/crash/bet/`?
3. –ß—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Üí –í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ ‚Üí –ü–æ–ø–æ–ª–Ω–∏ –±–∞–ª–∞–Ω—Å
- ‚ùå –†–∞—É–Ω–¥ –Ω–µ –≤ —Å—Ç–∞—Ç—É—Å–µ WAITING ‚Üí –î–æ–∂–¥–∏—Å—å –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞
- ‚ùå –ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ ‚Üí –ü—Ä–æ–≤–µ—Ä—å –ª–∏–º–∏—Ç—ã (0.01 - 1000 ‚ÇΩ)
- ‚ùå –£–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç–∞–≤–∫–∞ ‚Üí –î–æ–∂–¥–∏—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞—É–Ω–¥–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –°—Ç–∞—Ç—É—Å –†–∞—É–Ω–¥–∞

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:8000/api/games/crash/current/
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞—É–Ω–¥–µ:
```json
{
  "round_id": "...",
  "status": "waiting",  // –∏–ª–∏ "active", "crashed"
  "seconds_until_start": 5
}
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –õ–æ–≥–∏ –°–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–º–æ—Ç—Ä–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä - —Ç–∞–º –±—É–¥—É—Ç –ª–æ–≥–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—à–∏–±–æ–∫.

---

## üìä –ß—Ç–æ –ò–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –ö–æ–¥–µ

### templates/crash.html
```javascript
// –ë–´–õ–û:
function showMessage(text, type = 'info') {
    showNotification(text, type);  // ‚ùå –§—É–Ω–∫—Ü–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
}

function updateBalance(newBalance) { ... }  // –î—É–±–ª–∏–∫–∞—Ç
function getCookie(name) { ... }  // –î—É–±–ª–∏–∫–∞—Ç

// –°–¢–ê–õ–û:
// showMessage, updateBalance, formatCurrency, and getCookie 
// are defined in base.html  ‚úÖ
```

–¢–µ–ø–µ—Ä—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ `base.html`, –≥–¥–µ –æ–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –°–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏–≥—Ä–∞—Ç—å, —É–±–µ–¥–∏—Å—å —á—Ç–æ:

- [x] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (http://localhost:8000/)
- [x] –°–æ–∑–¥–∞–Ω –ø–µ—Ä–≤—ã–π —Ä–∞—É–Ω–¥ (`python init_crash.py`)
- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω
- [x] –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –±–∞–ª–∞–Ω—Å (> 0.01 ‚ÇΩ)
- [x] –†–∞—É–Ω–¥ –≤ —Å—Ç–∞—Ç—É—Å–µ WAITING (–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ API)
- [x] –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫

---

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ü–æ–≤–µ–¥–µ–Ω–∏–µ

### 1. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –°—Ç–∞–≤–∫–∏ (WAITING)
- –í–≤–æ–¥–∏—à—å —Å—É–º–º—É ‚Üí –ù–∞–∂–∏–º–∞–µ—à—å "–ü–æ—Å—Ç–∞–≤–∏—Ç—å"
- –í–∏–¥–∏—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–°—Ç–∞–≤–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∞!" (–∑–µ–ª–µ–Ω–æ–µ)
- –ë–∞–ª–∞–Ω—Å —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
- –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å—Ç–∞–≤–∏—Ç—å" —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
- –°—Ç–∞–≤–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ "–í–∞—à–∏ —Å—Ç–∞–≤–∫–∏"

### 2. –ê–∫—Ç–∏–≤–Ω—ã–π –†–∞—É–Ω–¥ (ACTIVE)
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞—Å—Ç–µ—Ç: 1.00x ‚Üí 1.50x ‚Üí 2.00x...
- –ì—Ä–∞—Ñ–∏–∫ —Ä–∏—Å—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–∞—Ç—å" –∞–∫—Ç–∏–≤–Ω–∞
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### 3. –ö—ç—à–∞—É—Ç
- –ù–∞–∂–∏–º–∞–µ—à—å "–ó–∞–±—Ä–∞—Ç—å"
- –í–∏–¥–∏—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–í—ã–∏–≥—Ä—ã—à: X ‚ÇΩ (Yx)" (–∑–µ–ª–µ–Ω–æ–µ)
- –ë–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- –°—Ç–∞–≤–∫–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "cashed_out"

### 4. –ö—Ä–∞—à
- –≠–∫—Ä–∞–Ω —Ç—Ä—è—Å–µ—Ç—Å—è
- –ö—Ä–∞—Å–Ω–∞—è –≤—Å–ø—ã—à–∫–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: "–ö–†–ê–®! Xx"
- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç
- –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ò–≥—Ä–µ!

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ. –ò–≥—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!

**–û—Ç–∫—Ä—ã–≤–∞–π –±—Ä–∞—É–∑–µ—Ä –∏ –∏–≥—Ä–∞–π:**
## http://localhost:8000/crash/

**–õ–æ–≥–∏–Ω –¥–ª—è —Ç–µ—Å—Ç–∞:**
- Username: `crash_api_test`
- Password: `test123`

---

–£–¥–∞—á–∏! üé∞üí∞
